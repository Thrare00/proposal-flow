{"version":3,"file":"ProposalContext.js","sourceRoot":"","sources":["ProposalContext.tsx"],"names":[],"mappings":"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","sourcesContent":["import { createContext, useContext, useState, ReactNode, useCallback, useEffect } from 'react';\nimport { Proposal, Task, CalendarEvent, ProposalStatus } from '../types';\n\nconst getCurrentDateTime = (): string => {\n  return new Date().toISOString();\n};\n\ninterface ProposalContextType {\n  proposals: Proposal[];\n  isLoading: boolean;\n  addProposal: (proposal: Omit<Proposal, 'id' | 'createdAt' | 'updatedAt' | 'tasks' | 'files'>) => string;\n  updateProposal: (id: string, updates: Partial<Omit<Proposal, 'id' | 'createdAt' | 'updatedAt' | 'tasks' | 'files'>>) => void;\n  deleteProposal: (id: string) => void;\n  getProposal: (id: string) => Proposal | undefined;\n  updateProposalStatus: (id: string, status: ProposalStatus) => void;\n  addTask: (proposalId: string, task: Omit<Task, 'id' | 'proposalId' | 'createdAt'>) => string;\n  updateTask: (proposalId: string, taskId: string, updates: Partial<Omit<Task, 'id' | 'proposalId' | 'createdAt'>>) => void;\n  deleteTask: (proposalId: string, taskId: string) => void;\n  loadInitialData: () => void;\n  customEvents: CalendarEvent[];\n  addCustomEvent: (event: Omit<CalendarEvent, 'id'>) => string;\n  updateCustomEvent: (eventId: string, updates: Partial<CalendarEvent>) => void;\n  deleteCustomEvent: (eventId: string) => void;\n}\n\nconst ProposalContext = createContext<ProposalContextType | undefined>(undefined);\n\nexport const useProposalContext = (): ProposalContextType => {\n  const context = useContext(ProposalContext);\n  if (context === undefined) {\n    throw new Error('useProposalContext must be used within a ProposalProvider');\n  }\n  return context;\n};\n\nexport const ProposalProvider = ({ children }: { children: ReactNode }): ReactNode => {\n  const [proposals, setProposals] = useState<Proposal[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [customEvents, setCustomEvents] = useState<CalendarEvent[]>([]);\n\n  useEffect(() => {\n    const saved = localStorage.getItem('customEvents');\n    if (saved) {\n      try {\n        setCustomEvents(JSON.parse(saved));\n      } catch (e) {\n        setCustomEvents([]);\n      }\n    }\n  }, []);\n\n  const saveCustomEvents = useCallback((events: CalendarEvent[]) => {\n    setCustomEvents(events);\n    localStorage.setItem('customEvents', JSON.stringify(events));\n  }, []);\n\n  const addCustomEvent = useCallback((event: Omit<CalendarEvent, 'id'>) => {\n    const id = `custom-${Date.now()}`;\n    const newEvent: CalendarEvent = { ...event, id };\n    const updated = [...customEvents, newEvent];\n    saveCustomEvents(updated);\n    return id;\n  }, [customEvents, saveCustomEvents]);\n\n  const updateCustomEvent = useCallback((eventId: string, updates: Partial<CalendarEvent>) => {\n    const updated = customEvents.map(ev => ev.id === eventId ? { ...ev, ...updates } : ev);\n    saveCustomEvents(updated);\n  }, [customEvents, saveCustomEvents]);\n\n  const deleteCustomEvent = useCallback((eventId: string) => {\n    const updated = customEvents.filter(ev => ev.id !== eventId);\n    saveCustomEvents(updated);\n  }, [customEvents, saveCustomEvents]);\n\n  const setSampleData = useCallback(() => {\n    const sampleProposals: Proposal[] = [\n      {\n        id: '1',\n        title: 'DoD Training System RFP',\n        agency: 'Department of Defense',\n        dueDate: '2025-06-04T00:00:00.000Z',\n        status: 'drafting',\n        notes: 'This proposal requires security clearance documentation.',\n        tasks: [\n          {\n            id: '101',\n            proposalId: '1',\n            title: 'Write Executive Summary',\n            owner: 'Jane Smith',\n            dueDate: '2025-05-25T00:00:00.000Z',\n            completed: false,\n            createdAt: '2025-05-23T00:00:00.000Z',\n          },\n          {\n            id: '102',\n            proposalId: '1',\n            title: 'Prepare Cost Analysis',\n            owner: 'John Doe',\n            dueDate: '2025-05-30T00:00:00.000Z',\n            completed: false,\n            createdAt: '2025-05-23T00:00:00.000Z',\n          }\n        ],\n        createdAt: '2025-05-23T00:00:00.000Z',\n        updatedAt: '2025-05-23T00:00:00.000Z',\n        type: 'federal',\n        files: []\n      },\n      {\n        id: '2',\n        title: 'EPA Environmental Assessment',\n        agency: 'Environmental Protection Agency',\n        dueDate: '2025-05-20T00:00:00.000Z',\n        status: 'internal_review',\n        notes: 'Need to emphasize environmental impact mitigation strategies.',\n        tasks: [\n          {\n            id: '201',\n            proposalId: '2',\n            title: 'Complete Impact Analysis',\n            owner: 'Sarah Johnson',\n            dueDate: '2025-05-19T00:00:00.000Z',\n            completed: true,\n            createdAt: '2025-05-13T00:00:00.000Z',\n          }\n        ],\n        createdAt: '2025-05-13T00:00:00.000Z',\n        updatedAt: '2025-05-23T00:00:00.000Z',\n        type: 'federal',\n        files: []\n      },\n      {\n        id: '3',\n        title: 'HHS Healthcare Portal',\n        agency: 'Health and Human Services',\n        dueDate: '2025-05-24T00:00:00.000Z',\n        status: 'final_review',\n        notes: 'Final compliance review needed before submission.',\n        tasks: [\n          {\n            id: '301',\n            proposalId: '3',\n            title: 'Review HIPAA Compliance',\n            owner: 'Michael Brown',\n            dueDate: '2025-05-23T00:00:00.000Z',\n            completed: false,\n            createdAt: '2025-05-03T00:00:00.000Z',\n          }\n        ],\n        createdAt: '2025-05-03T00:00:00.000Z',\n        updatedAt: '2025-05-23T00:00:00.000Z',\n        type: 'federal',\n        files: []\n      }\n    ];\n\n    setProposals(sampleProposals);\n    localStorage.setItem('proposals', JSON.stringify(sampleProposals));\n  }, [setProposals]);\n\n  const loadInitialData = useCallback(() => {\n    try {\n      setIsLoading(true);\n      const savedProposals = localStorage.getItem('proposals');\n      if (savedProposals) {\n        const parsedProposals = JSON.parse(savedProposals);\n        if (Array.isArray(parsedProposals)) {\n          const isValid = parsedProposals.every(proposal => \n            typeof proposal === 'object' &&\n            typeof proposal.id === 'string' &&\n            typeof proposal.title === 'string' &&\n            typeof proposal.agency === 'string' &&\n            typeof proposal.dueDate === 'string' &&\n            ['intake', 'outline', 'drafting', 'internal_review', 'final_review', 'submitted'].includes(proposal.status) &&\n            ['commercial', 'local_state', 'federal'].includes(proposal.type)\n          );\n          \n          if (isValid) {\n            setProposals(parsedProposals);\n            setIsLoading(false);\n            return;\n          }\n        }\n      }\n      setSampleData();\n      setIsLoading(false);\n    } catch (error) {\n      console.error('Error loading proposals:', error);\n      setSampleData();\n      setIsLoading(false);\n    }\n  }, [setSampleData]);\n\n  const saveProposals = useCallback((newProposals: Proposal[]) => {\n    setProposals(newProposals);\n    localStorage.setItem('proposals', JSON.stringify(newProposals));\n  }, [setProposals]);\n  \n  const addProposal = useCallback((proposal: Omit<Proposal, 'id' | 'createdAt' | 'updatedAt' | 'tasks' | 'files'>) => {\n    const id = Date.now().toString();\n    const now = getCurrentDateTime();\n    const newProposal: Proposal = {\n      ...proposal,\n      id,\n      tasks: [],\n      files: [], \n      createdAt: now,\n      updatedAt: now,\n    };\n    \n    const updatedProposals = [...proposals, newProposal];\n    saveProposals(updatedProposals);\n    return id;\n  }, [saveProposals, getCurrentDateTime]);\n  \n  const updateProposal = useCallback((id: string, updates: Partial<Omit<Proposal, 'id' | 'createdAt' | 'updatedAt' | 'tasks' | 'files'>>) => {\n    const updatedProposals = proposals.map(proposal => \n      proposal.id === id\n        ? { \n            ...proposal, \n            ...updates, \n            updatedAt: getCurrentDateTime() \n          }\n        : proposal\n    );\n    saveProposals(updatedProposals);\n  }, [saveProposals, getCurrentDateTime]);\n  \n  const deleteProposal = useCallback((id: string) => {\n    const updatedProposals = proposals.filter(proposal => proposal.id !== id);\n    saveProposals(updatedProposals);\n  }, [saveProposals]);\n  \n  const getProposal = useCallback((id: string) => {\n    return proposals.find(proposal => proposal.id === id);\n  }, []);\n  \n  const updateProposalStatus = useCallback((id: string, status: ProposalStatus) => {\n    const updatedProposals = proposals.map(proposal => \n      proposal.id === id\n        ? { \n            ...proposal, \n            status, \n            updatedAt: getCurrentDateTime() \n          }\n        : proposal\n    );\n    saveProposals(updatedProposals);\n  }, [saveProposals, getCurrentDateTime]);\n  \n  const addTask = useCallback((proposalId: string, task: Omit<Task, 'id' | 'proposalId' | 'createdAt'>) => {\n    const taskId = `${proposalId}-${Date.now()}`;\n    const now = getCurrentDateTime();\n    \n    const updatedProposals = proposals.map(proposal => {\n      if (proposal.id === proposalId) {\n        return {\n          ...proposal,\n          tasks: [\n            ...proposal.tasks,\n            {\n              ...task,\n              id: taskId,\n              proposalId,\n              createdAt: now,\n            }\n          ],\n          updatedAt: now,\n        };\n      }\n      return proposal;\n    });\n    \n    saveProposals(updatedProposals);\n    return taskId;\n  }, [saveProposals, getCurrentDateTime]);\n  \n  const updateTask = useCallback((proposalId: string, taskId: string, updates: Partial<Omit<Task, 'id' | 'proposalId' | 'createdAt'>>) => {\n    const updatedProposals = proposals.map(proposal => {\n      if (proposal.id === proposalId) {\n        return {\n          ...proposal,\n          tasks: proposal.tasks.map(task =>\n            task.id === taskId\n              ? { ...task, ...updates }\n              : task\n          ),\n          updatedAt: getCurrentDateTime(),\n        };\n      }\n      return proposal;\n    });\n    saveProposals(updatedProposals);\n  }, [saveProposals, getCurrentDateTime]);\n\n  const deleteTask = useCallback((proposalId: string, taskId: string) => {\n    const updatedProposals = proposals.map(proposal => {\n      if (proposal.id === proposalId) {\n        return {\n          ...proposal,\n          tasks: proposal.tasks.filter(task => task.id !== taskId),\n          updatedAt: getCurrentDateTime(),\n        };\n      }\n      return proposal;\n    });\n    saveProposals(updatedProposals);\n  }, [saveProposals, getCurrentDateTime]);\n\n  useEffect(() => {\n    loadInitialData();\n  }, [loadInitialData]);\n\n  const value = {\n    proposals,\n    isLoading,\n    addProposal,\n    updateProposal,\n    deleteProposal,\n    getProposal,\n    updateProposalStatus,\n    addTask,\n    updateTask,\n    deleteTask,\n    loadInitialData,\n    customEvents,\n    addCustomEvent,\n    updateCustomEvent,\n    deleteCustomEvent,\n  };\n\n  return (\n    <ProposalContext.Provider value={value}>\n      {children}\n    </ProposalContext.Provider>\n  );\n};\n\nexport default ProposalProvider;"]}