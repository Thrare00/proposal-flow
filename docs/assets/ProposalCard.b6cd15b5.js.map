{"version":3,"file":"ProposalCard.b6cd15b5.js","sources":["../../src/components/ProposalCard.jsx"],"sourcesContent":["import React from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { \n  Calendar, \n  Building, \n  Clock, \n  CheckCircle, \n  ArrowRight,\n  AlertTriangle\n} from 'lucide-react';\nimport { formatDate, getUrgencyLevel, getUrgencyColor, isOverdue } from '../utils/dateUtils.js';\nimport { getStatusName, getStatusColor } from '../utils/statusUtils.js';\nimport { format } from 'date-fns';\n\nconst ProposalCard = ({ proposal = {}, showActions = true }) => {\n  // Safely handle missing or malformed proposal data\n  if (!proposal || typeof proposal !== 'object') {\n    return (\n      <div className=\"card border-l-4 border-l-gray-300 p-4\">\n        <div className=\"text-gray-500\">Invalid proposal data</div>\n      </div>\n    );\n  }\n\n  const { \n    id, \n    title = 'Untitled Proposal', \n    agency = 'No Agency', \n    dueDate, \n    status = 'drafting',\n    tasks = [] \n  } = proposal;\n\n  const urgencyLevel = getUrgencyLevel(dueDate);\n  const urgencyColorClass = getUrgencyColor(urgencyLevel);\n  const statusColorClass = getStatusColor(status);\n  const isTasksCompleted = tasks.length > 0 && tasks.every(task => task?.completed);\n  \n  const totalTasks = tasks.length;\n  const completedTasks = tasks.filter(task => task?.completed).length;\n  const taskCompletionPercentage = totalTasks > 0 \n    ? Math.round((completedTasks / totalTasks) * 100) \n    : 0;\n    \n  const isOverdueDueDate = isOverdue(dueDate);\n  \n  return (\n    <div \n      className={`card border-l-4 ${\n        isOverdueDueDate ? 'border-l-error-500' : \n        urgencyLevel === 'critical' ? 'border-l-error-500' :\n        urgencyLevel === 'high' ? 'border-l-warning-500' :\n        urgencyLevel === 'medium' ? 'border-l-accent-500' :\n        'border-l-success-500'\n      } hover:shadow-md transition-all`}\n      aria-labelledby={`proposal-${id}-title`}\n    >\n      <div className=\"flex justify-between items-start mb-3\">\n        <h3 id={`proposal-${id}-title`} className=\"text-xl font-semibold line-clamp-1\">\n          {title}\n        </h3>\n        <span \n          className={`badge ${statusColorClass}`}\n          aria-label={`Status: ${getStatusName(status)}`}\n        >\n          {getStatusName(status)}\n        </span>\n      </div>\n      \n      <div className=\"space-y-2 mb-4\">\n        <div className=\"flex items-center text-gray-600\">\n          <Building size={16} className=\"mr-2\" aria-hidden=\"true\" />\n          <span className=\"text-sm\">{agency}</span>\n        </div>\n        \n        <div className=\"flex items-center\">\n          <Calendar \n            size={16} \n            className={`mr-2 ${isOverdueDueDate ? 'text-error-500' : 'text-gray-600'}`} \n            aria-hidden=\"true\" \n          />\n          <span className={`text-sm ${isOverdueDueDate ? 'text-error-600 font-medium' : 'text-gray-600'}`}>\n            {isOverdue(proposal.dueDate) ? 'Overdue: ' : 'Due: '}\n            {formatDate(proposal.dueDate)}\n            {isOverdue(proposal.dueDate) && (\n              <AlertTriangle size={14} className=\"inline ml-1 text-error-500\" />\n            )}\n          </span>\n        </div>\n        \n        <div className=\"flex items-center text-gray-600\">\n          <Clock size={16} className=\"mr-2\" />\n          <span className={`text-sm ${urgencyColorClass} px-2 py-0.5 rounded-full`}>\n            {urgencyLevel === 'critical' \n              ? isOverdue(proposal.dueDate) \n                ? 'Overdue' \n                : 'Due immediately' \n              : urgencyLevel === 'high' \n                ? 'Due soon' \n                : urgencyLevel === 'medium' \n                  ? 'Approaching' \n                  : 'On track'}\n          </span>\n        </div>\n      </div>\n      \n      {/* Task progress */}\n      <div className=\"mb-3\">\n        <div className=\"flex justify-between items-center mb-1\">\n          <span className=\"text-sm text-gray-600\">Task Progress</span>\n          <span className=\"text-sm font-medium\">\n            {completedTasks}/{totalTasks} ({taskCompletionPercentage}%)\n          </span>\n        </div>\n        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n          <div \n            className={`h-2 rounded-full ${\n              taskCompletionPercentage === 100 \n                ? 'bg-success-500' \n                : taskCompletionPercentage > 50 \n                  ? 'bg-accent-500' \n                  : taskCompletionPercentage > 0 \n                    ? 'bg-primary-500' \n                    : 'bg-gray-300'\n            }`} \n            style={{ width: `${taskCompletionPercentage}%` }}\n          />\n        </div>\n        {totalTasks === 0 && (\n          <p className=\"text-xs text-gray-500 mt-1\">No tasks created yet</p>\n        )}\n      </div>\n      \n      {showActions && (\n        <div className=\"flex justify-between items-center mt-4 pt-3 border-t border-gray-100\">\n          <div>\n            {isTasksCompleted && totalTasks > 0 ? (\n              <span className=\"flex items-center text-sm text-success-600\">\n                <CheckCircle size={16} className=\"mr-1\" />\n                All tasks complete\n              </span>\n            ) : (\n              <span className=\"text-sm text-gray-500\">\n                {totalTasks > 0\n                  ? `${totalTasks - completedTasks} tasks remaining`\n                  : 'No tasks added'\n                }\n              </span>\n            )}\n          </div>\n          \n          <Link \n            to={`/proposals/${proposal.id}/analyze`}\n            className=\"flex items-center text-primary-600 hover:text-primary-800 text-sm font-medium\"\n          >\n            View Details\n            <ArrowRight size={16} className=\"ml-1\" />\n          </Link>\n        </div>\n      )}\n    </div>\n  );\n};\n\nProposalCard.propTypes = {\n  proposal: PropTypes.shape({\n    id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    title: PropTypes.string,\n    agency: PropTypes.string,\n    dueDate: PropTypes.oneOfType([PropTypes.string, PropTypes.instanceOf(Date)]),\n    status: PropTypes.string,\n    tasks: PropTypes.arrayOf(PropTypes.shape({\n      id: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n      title: PropTypes.string,\n      completed: PropTypes.bool\n    }))\n  }),\n  showActions: PropTypes.bool\n};\n\nProposalCard.defaultProps = {\n  proposal: {\n    id: '',\n    title: 'Untitled Proposal',\n    agency: 'No Agency',\n    status: 'drafting',\n    tasks: []\n  },\n  showActions: true\n};\n\nexport default React.memo(ProposalCard);"],"names":["ProposalCard","proposal","showActions","jsx","id","title","agency","dueDate","status","tasks","urgencyLevel","getUrgencyLevel","urgencyColorClass","getUrgencyColor","statusColorClass","getStatusColor","isTasksCompleted","task","totalTasks","completedTasks","taskCompletionPercentage","isOverdueDueDate","isOverdue","jsxs","getStatusName","Building","Calendar","formatDate","AlertTriangle","Clock","CheckCircle","Link","ArrowRight","PropTypes","ProposalCard$1","React"],"mappings":"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"}