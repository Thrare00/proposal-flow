import{u as C,j as e}from"./main.aace1b1f.js";import{r as l,L as z,d as y,O as L}from"./react-vendor.36470f4f.js";import{S as $,M as O,a as P,C as M,P as v,L as _,b as R,c as j,d as f,A as D,B as I,F as A}from"./ui-lib.676c71c1.js";import{e as B}from"./enqueue.c7bc3081.js";import{g as N}from"./api.e91b4448.js";const E=()=>{const{isDarkMode:n,toggleTheme:r}=C();return e.jsx("div",{className:"relative inline-block w-12 h-6",children:e.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-800 rounded-full transition-colors",onClick:r,children:e.jsx("div",{className:`absolute left-0.5 top-0.5 w-5 h-5 rounded-full transition-transform duration-200 ease-in-out transform ${n?"translate-x-6 bg-primary-600":"bg-white"}`,children:n?e.jsx($,{className:"w-4 h-4 text-yellow-400"}):e.jsx(O,{className:"w-4 h-4 text-gray-600"})})})})};function J(){const[n,r]=l.useState(JSON.stringify({action:"log_directory",payload:{Portal:"BidNet",URL:"https://www.bidnetdirect.com/",Status:"Started"}},null,2)),[o,i]=l.useState(!1),[c,w]=l.useState(null),[d,b]=l.useState(null),[x,m]=l.useState(null),[h,u]=l.useState(!1);l.useEffect(()=>{if(!h)return;const a=async()=>{try{const s=await N();s!=null&&s.last_processed&&b({ts:s.last_processed.timestamp,action:s.last_processed.action,ok:s.last_processed.success})}catch(s){console.error("Error fetching health status:",s)}};a();const g=setInterval(a,3e4);return()=>clearInterval(g)},[h]);const k=l.useCallback(async()=>{i(!0),m(null);try{const a=JSON.parse(n);await B(a);const g=new Date().toISOString();w(g);const s=await N();s!=null&&s.last_processed&&b({ts:s.last_processed.timestamp,action:s.last_processed.action,ok:s.last_processed.success})}catch(a){m(a.message)}finally{i(!1)}},[n]),S=l.useCallback(()=>{r(JSON.stringify({action:"log_directory",payload:{Portal:"BidNet",URL:"https://www.bidnetdirect.com/",Status:"Started"}},null,2)),m(null)},[]),p=a=>{if(!a)return"—";try{return new Date(a).toLocaleString()}catch{return"Invalid date"}};return h?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>u(!1)}),e.jsx("div",{className:"absolute inset-y-0 right-0 max-w-full flex",children:e.jsx("div",{className:"relative w-screen max-w-md",children:e.jsx("div",{className:"h-full flex flex-col bg-white dark:bg-gray-800 shadow-xl",children:e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Automation Console"}),e.jsxs("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-500 dark:hover:text-gray-300",children:[e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"payload",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Job Payload (JSON)"}),e.jsx("textarea",{id:"payload",rows:10,className:`w-full px-3 py-2 border rounded-md font-mono text-sm ${x?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,value:n,onChange:a=>r(a.target.value),disabled:o}),x&&e.jsxs("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:["Invalid JSON: ",x]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{type:"button",onClick:k,disabled:o,className:`px-4 py-2 rounded-md text-sm font-medium ${o?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white"}`,children:o?"Sending...":"Send to Automation"}),e.jsx("button",{type:"button",onClick:S,disabled:o,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:"Reset"})]}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400 w-32",children:"Last Sent:"}),e.jsx("span",{className:"font-mono text-sm",children:c?p(c):"—"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400 w-32 flex-shrink-0",children:"Last Processed:"}),e.jsx("div",{className:"flex-1",children:d?e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:d.action}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{className:d.ok?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:d.ok?"success":"failed"}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:p(d.ts)})]}):e.jsx("span",{children:"—"})})]})]})]})]})})})})]}):e.jsx("button",{onClick:()=>u(!0),className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",title:"Open Automation Console",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})})}const t="/proposal-flow/",F=[{to:`${t}`,icon:e.jsx(_,{size:18}),label:"Dashboard"},{to:`${t}flowboard`,icon:e.jsx(R,{size:18}),label:"Flow Board"},{to:`${t}calendar`,icon:e.jsx(j,{size:18}),label:"Calendar"},{to:`${t}reports`,icon:e.jsx(f,{size:18}),label:"Reports"},{to:`${t}cadence`,icon:e.jsx(j,{size:18}),label:"Cadence Settings"},{to:`${t}health`,icon:e.jsx(D,{size:18}),label:"System Health"},{to:`${t}guide`,icon:e.jsx(I,{size:18}),label:"Guide"},{to:`${t}reminders`,icon:e.jsx(f,{size:18}),label:"Reminders"},{to:`${t}proposals/new`,icon:e.jsx(v,{size:18}),label:"New Proposal"},{to:`${t}sow-analyzer`,icon:e.jsx(A,{size:18}),label:"SOW Analyzer"}],W=({children:n})=>{const[r,o]=l.useState(!1);return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-800",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>o(!r),className:"mr-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:r?e.jsx(P,{size:20}):e.jsx(M,{size:20})}),e.jsx(z,{to:t,className:"flex items-center",children:e.jsx("span",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:"ProposalFlow"})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(E,{}),e.jsx("div",{className:"ml-4",children:e.jsx(J,{})})]})]})})}),e.jsx("div",{className:`fixed inset-y-16 left-0 ${r?"w-16":"w-64"} bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 md:block transform transition-transform duration-200 ease-in-out z-50`,children:e.jsx("nav",{className:"flex-1",children:F.map(i=>e.jsxs(y,{to:i.to,className:({isActive:c})=>`flex items-center px-4 py-3 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg ${c?"bg-gray-100 dark:bg-gray-800":""}`,children:[r?i.icon:null,!r&&e.jsx("span",{className:"ml-3",children:i.label})]},i.to))})}),e.jsx("main",{className:"flex-1 pt-16",children:e.jsxs("div",{className:"ml-64 md:ml-64",children:[e.jsx("div",{className:"flex justify-end mb-6 p-4",children:e.jsxs(y,{to:"/proposals/new",className:"btn btn-primary bg-primary-600 text-white hover:bg-primary-700 dark:bg-primary-900 dark:hover:bg-primary-800",children:[e.jsx(v,{size:18}),e.jsx("span",{children:"New Proposal"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx(L,{}),n]})]})})]})};export{W as default};
//# sourceMappingURL=Layout.29e736cb.js.map
