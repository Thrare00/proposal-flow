{"version":3,"file":"TaskCard.e93127c6.js","sources":["../../src/components/TaskCard.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { \n  User, \n  Calendar,\n  Check,\n  Edit,\n  Trash2,\n  AlertTriangle\n} from 'lucide-react';\nimport { UrgencyBadge } from './UrgencyBadge.jsx';\nimport { formatDate, isOverdue } from '../utils/dateUtils.js';\nimport { format } from 'date-fns';\nimport { useProposalContext } from '../contexts/ProposalContext.jsx';\n\nconst TaskCard = ({ task, showProposalLink, onEdit, onDelete }) => {\n  const [isConfirmingDelete, setIsConfirmingDelete] = useState(false);\n  const context = useProposalContext();\n  const { updateTaskStatus } = context;\n  const urgency = task.urgency || 'low';\n  \n  const handleToggleComplete = () => {\n    const newStatus = task.status.current === 'completed' ? 'in_progress' : 'completed';\n    updateTaskStatus(task.id, {\n      current: newStatus,\n      progress: newStatus === 'completed' ? 100 : 50,\n      lastUpdated: new Date().toISOString()\n    });\n  };\n  \n  const handleDeleteTask = () => {\n    if (isConfirmingDelete) {\n      onDelete();\n      setIsConfirmingDelete(false);\n    } else {\n      setIsConfirmingDelete(true);\n      \n      // Reset confirmation state after 3 seconds\n      setTimeout(() => {\n        setIsConfirmingDelete(false);\n      }, 3000);\n    }\n  };\n  \n  return (\n    <div className={`card border ${\n      task.status.current === 'completed' \n        ? 'border-success-200 bg-success-50' \n        : isOverdue(task.dueDate)\n          ? 'border-error-200 bg-error-50'\n          : 'border-gray-200'\n    }`}>\n      <div className=\"flex items-start justify-between\">\n        <div className=\"flex-1\">\n          <div className=\"flex items-start\">\n            <button \n              onClick={handleToggleComplete}\n              className={`flex-shrink-0 h-5 w-5 rounded border ${\n                task.status.current === 'completed' \n                  ? 'bg-success-500 border-success-500 text-white' \n                  : 'border-gray-300 bg-white'\n              } flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 mr-3 mt-1`}\n              aria-label={task.status.current === 'completed' ? \"Mark as incomplete\" : \"Mark as complete\"}\n            >\n              {task.status.current === 'completed' && <Check size={14} />}\n            </button>\n            \n            <div className=\"flex-1\">\n              <h3 className={`text-base font-medium ${\n                task.status.current === 'completed' ? 'line-through text-gray-500' : 'text-gray-900'\n              }`}>{task.title}</h3>\n              \n              {showProposalLink && (\n                <Link \n                  to={`/proposals/${task.proposalId}`} \n                  className=\"text-sm text-primary-600 hover:text-primary-800 block mt-1\"\n                >\n                  {task.title}\n                </Link>\n              )}\n              \n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <User size={16} className=\"text-gray-400\" />\n                  <span className=\"text-sm text-gray-500\">{task.owner}</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <UrgencyBadge urgency={urgency} />\n                  <Calendar size={16} className=\"text-gray-400\" />\n                  <span className=\"text-sm text-gray-500\">\n                    {formatDate(task.dueDate)}\n                    {isOverdue(task.dueDate) && !task.completed && (\n                      <AlertTriangle size={12} className=\"inline ml-1 text-error-500\" />\n                    )}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"flex space-x-1\">\n          <button \n            onClick={onEdit}\n            className=\"p-1 text-gray-500 hover:text-primary-600 rounded-full hover:bg-gray-100\"\n            title=\"Edit task\"\n          >\n            <Edit size={16} />\n          </button>\n          \n          <button \n            onClick={handleDeleteTask}\n            className={`p-1 rounded-full ${\n              isConfirmingDelete \n                ? 'text-white bg-error-500 hover:bg-error-600' \n                : 'text-gray-500 hover:text-error-600 hover:bg-gray-100'\n            }`}\n            title={isConfirmingDelete ? \"Confirm delete\" : \"Delete task\"}\n          >\n            <Trash2 size={16} />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default TaskCard;"],"names":["TaskCard","task","showProposalLink","onEdit","onDelete","isConfirmingDelete","setIsConfirmingDelete","useState","context","useProposalContext","updateTaskStatus","urgency","handleToggleComplete","newStatus","handleDeleteTask","isOverdue","jsxs","jsx","Check","Link","User","UrgencyBadge","Calendar","formatDate","AlertTriangle","Edit","Trash2"],"mappings":"kRAeA,MAAMA,EAAW,CAAC,CAAE,KAAAC,EAAM,iBAAAC,EAAkB,OAAAC,EAAQ,SAAAC,KAAe,CACjE,KAAM,CAACC,EAAoBC,CAAqB,EAAIC,WAAS,EAAK,EAC5DC,EAAUC,IACV,CAAE,iBAAAC,CAAqB,EAAAF,EACvBG,EAAUV,EAAK,SAAW,MAE1BW,EAAuB,IAAM,CACjC,MAAMC,EAAYZ,EAAK,OAAO,UAAY,YAAc,cAAgB,YACxES,EAAiBT,EAAK,GAAI,CACxB,QAASY,EACT,SAAUA,IAAc,YAAc,IAAM,GAC5C,YAAa,IAAI,KAAK,EAAE,YAAY,CAAA,CACrC,CAAA,EAGGC,EAAmB,IAAM,CACzBT,GACOD,IACTE,EAAsB,EAAK,IAE3BA,EAAsB,EAAI,EAG1B,WAAW,IAAM,CACfA,EAAsB,EAAK,GAC1B,GAAI,EACT,EAGF,aACG,MAAI,CAAA,UAAW,eACdL,EAAK,OAAO,UAAY,YACpB,mCACAc,EAAUd,EAAK,OAAO,EACpB,+BACA,iBACR,GACE,SAACe,EAAA,KAAA,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,SACb,SAACD,EAAA,KAAA,MAAA,CAAI,UAAU,mBACb,SAAA,CAAAC,EAAA,IAAC,SAAA,CACC,QAASL,EACT,UAAW,wCACTX,EAAK,OAAO,UAAY,YACpB,+CACA,0BACN,yHACA,aAAYA,EAAK,OAAO,UAAY,YAAc,qBAAuB,mBAExE,WAAK,OAAO,UAAY,aAAgBgB,EAAA,IAAAC,EAAA,CAAM,KAAM,GAAI,CAAA,CAC3D,EAEAF,EAAAA,KAAC,MAAI,CAAA,UAAU,SACb,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAW,yBACbhB,EAAK,OAAO,UAAY,YAAc,6BAA+B,eACvE,GAAK,SAAAA,EAAK,MAAM,EAEfC,GACCe,EAAA,IAACE,EAAA,CACC,GAAI,cAAclB,EAAK,UAAU,GACjC,UAAU,6DAET,SAAKA,EAAA,KAAA,CACR,EAGFe,EAAAA,KAAC,MAAI,CAAA,UAAU,oCACb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAA,IAACG,EAAK,CAAA,KAAM,GAAI,UAAU,gBAAgB,EACzCH,EAAA,IAAA,OAAA,CAAK,UAAU,wBAAyB,WAAK,MAAM,CAAA,EACtD,EACAD,EAAAA,KAAC,MAAI,CAAA,UAAU,0BACb,SAAA,CAAAC,MAACI,GAAa,QAAAV,EAAkB,EAC/BM,EAAA,IAAAK,EAAA,CAAS,KAAM,GAAI,UAAU,gBAAgB,EAC9CN,EAAAA,KAAC,OAAK,CAAA,UAAU,wBACb,SAAA,CAAAO,EAAWtB,EAAK,OAAO,EACvBc,EAAUd,EAAK,OAAO,GAAK,CAACA,EAAK,WAChCgB,MAACO,EAAc,CAAA,KAAM,GAAI,UAAU,4BAA6B,CAAA,CAAA,EAEpE,CAAA,EACF,CAAA,EACF,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,EAEAR,EAAAA,KAAC,MAAI,CAAA,UAAU,iBACb,SAAA,CAAAC,EAAA,IAAC,SAAA,CACC,QAASd,EACT,UAAU,0EACV,MAAM,YAEN,SAAAc,EAAAA,IAACQ,EAAK,CAAA,KAAM,EAAI,CAAA,CAAA,CAClB,EAEAR,EAAA,IAAC,SAAA,CACC,QAASH,EACT,UAAW,oBACTT,EACI,6CACA,sDACN,GACA,MAAOA,EAAqB,iBAAmB,cAE/C,SAAAY,EAAAA,IAACS,EAAO,CAAA,KAAM,EAAI,CAAA,CAAA,CACpB,CAAA,EACF,CAAA,CACF,CAAA,CACF,CAAA,CAEJ"}