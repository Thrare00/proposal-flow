import{j as e}from"./main.b5b31452.js";import{g as D,h as B,r as o,L as S}from"./react-vendor.36470f4f.js";import{f as R,P as r}from"./dateUtils.a866c5f2.js";import{C as P,a as k,b as O}from"./card.08a4aedc.js";import{B as x}from"./button.183cc5ec.js";import{U as z}from"./UrgencyBadge.5d6278af.js";import{L as F}from"./LoadingSpinner.1e7844f4.js";import"./parseISO.585b4435.js";import"./format.ad2c0b21.js";import"./isValid.f1396d2d.js";import"./isSameDay.07bbb616.js";function M({status:d}){const i={intake:"bg-blue-100 text-blue-800",outline:"bg-yellow-100 text-yellow-800",drafting:"bg-orange-100 text-orange-800",internal_review:"bg-purple-100 text-purple-800",final_review:"bg-indigo-100 text-indigo-800",submitted:"bg-green-100 text-green-800"};return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i[d]}`,children:d.replace("_"," ")})}function b(){const d=D(),i=B()||[],[c,h]=o.useState(i),[N,g]=o.useState(!1),[f,p]=o.useState(null),[a,y]=o.useState({status:"all",search:"",sortBy:"dueDate",sortOrder:"asc"});o.useEffect(()=>{d.state==="loading"?g(!0):g(!1)},[d.state]),o.useEffect(()=>{try{let s=[...i];if(a.search){const t=a.search.toLowerCase();s=s.filter(l=>l.title.toLowerCase().includes(t)||l.agency&&l.agency.toLowerCase().includes(t)||l.id&&l.id.toString().includes(t))}a.status!=="all"&&(s=s.filter(t=>t.status===a.status)),s.sort((t,l)=>{var v,w;let n=0;if(a.sortBy==="dueDate"){const m=new Date(t.dueDate),u=new Date(l.dueDate);n=m-u}else{const m=((v=t[a.sortBy])==null?void 0:v.toString().toLowerCase())||"",u=((w=l[a.sortBy])==null?void 0:w.toString().toLowerCase())||"";n=m.localeCompare(u)}return a.sortOrder==="asc"?n:-n}),h(s),p(null)}catch(s){console.error("Error filtering proposals:",s),p("Failed to filter proposals. Please try again."),h(i)}},[i,a]);const j=s=>{const{name:t,value:l}=s.target;y(n=>({...n,[t]:l}))},C=s=>{y(t=>({...t,sortBy:s,sortOrder:t.sortBy===s&&t.sortOrder==="asc"?"desc":"asc"}))},L=[...new Set(i.map(s=>s.status))];return N?e.jsxs("div",{className:"flex items-center justify-center min-h-[50vh]",children:[e.jsx(F,{size:"lg"}),e.jsx("span",{className:"sr-only",children:"Loading proposals..."})]}):f?e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:f})})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Proposals"}),e.jsx(x,{to:"/dashboard/proposals/new",className:"w-full md:w-auto","aria-label":"Create new proposal",children:"New Proposal"})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"search",className:"sr-only",children:"Search proposals"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:e.jsx("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),e.jsx("input",{type:"text",name:"search",id:"search",value:a.search,onChange:j,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Search by title, agency, or ID"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"status",className:"sr-only",children:"Filter by status"}),e.jsxs("select",{id:"status",name:"status",value:a.status,onChange:j,className:"block w-full pl-3 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"all",children:"All Statuses"}),L.map(s=>e.jsx("option",{value:s,children:s.charAt(0).toUpperCase()+s.slice(1).replace("_"," ")},s))]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:()=>C("dueDate"),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 w-full justify-center",children:a.sortBy==="dueDate"&&a.sortOrder==="asc"?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M14.707 12.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L9 14.586V3a1 1 0 012 0v11.586l2.293-2.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Sort by Due Date"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L6.707 7.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),"Sort by Due Date"]})})})]})}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Showing ",e.jsx("span",{className:"font-medium",children:c.length})," of ",e.jsx("span",{className:"font-medium",children:i.length})," proposals"]}),c.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(s=>{var t;return e.jsxs(P,{className:"h-full flex flex-col",children:[e.jsxs(k,{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 line-clamp-2",title:s.title,children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-2",children:[e.jsx(M,{status:s.status}),((t=s.metadata)==null?void 0:t.urgency)&&e.jsx(z,{urgency:s.metadata.urgency})]})]}),e.jsxs(O,{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"space-y-2 mb-4",children:[s.agency&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Agency:"})," ",s.agency]}),s.dueDate&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Due:"})," ",R(s.dueDate,"N/A")]}),s.type&&e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",s.type]})]}),e.jsx("div",{className:"mt-auto pt-4 border-t border-gray-100",children:e.jsx(x,{as:S,to:`/dashboard/proposals/${s.id}`,variant:"outline",className:"w-full justify-center","aria-label":`View details for ${s.title}`,children:"View Details"})})]})]},s.id)})}):e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No proposals found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a.status!=="all"||a.search?"Try adjusting your search or filter to find what you're looking for.":"Get started by creating a new proposal."}),e.jsx("div",{className:"mt-6",children:e.jsxs(x,{to:"/dashboard/proposals/new",variant:"primary",children:[e.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"New Proposal"]})})]})]})}b.propTypes={initialProposals:r.arrayOf(r.shape({id:r.oneOfType([r.string,r.number]).isRequired,title:r.string.isRequired,status:r.string.isRequired,agency:r.string,dueDate:r.oneOfType([r.string,r.instanceOf(Date)]),type:r.string,metadata:r.shape({urgency:r.string})}))};b.defaultProps={initialProposals:[]};export{b as ProposalList};
//# sourceMappingURL=ProposalList.bab2144c.js.map
