function n(e,t=""){return typeof import.meta<"u"&&{VITE_BASE_URL:"/proposal-flow/",VITE_QUEUE_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_URL:"https://script.google.com/macros/s/AKfycbyYhYWfVMNqIUlYgwlT8_Sv3ZPXze_EyBzdpjbGwk45Qemjw3GcHT7rSqI1i1zLjS4/exec",VITE_HEALTH_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_PROXY:"https://proposal-flow.rareearthcontracting.workers.dev",VITE_REPORTS_FOLDER_ID:"1BCghnwFPWT1_TZ5Z4nAO13KAIZ2NlDM1",BASE_URL:"/proposal-flow/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&{VITE_BASE_URL:"/proposal-flow/",VITE_QUEUE_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_URL:"https://script.google.com/macros/s/AKfycbyYhYWfVMNqIUlYgwlT8_Sv3ZPXze_EyBzdpjbGwk45Qemjw3GcHT7rSqI1i1zLjS4/exec",VITE_HEALTH_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_PROXY:"https://proposal-flow.rareearthcontracting.workers.dev",VITE_REPORTS_FOLDER_ID:"1BCghnwFPWT1_TZ5Z4nAO13KAIZ2NlDM1",BASE_URL:"/proposal-flow/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[e]||t}const s=n("VITE_QUEUE_URL")||n("VITE_GAS_PROXY")||n("VITE_ENQUEUE_ENDPOINT"),o=n("VITE_QUEUE_TOKEN");async function E(e){if(typeof window>"u")return{id:"build-skip",status:"skipped"};if(!s)return console.warn("Missing VITE_QUEUE_URL or VITE_ENQUEUE_ENDPOINT in environment variables"),{id:"no-queue-url",status:"error",error:"Queue URL not configured"};if(!o)return console.warn("Missing VITE_QUEUE_TOKEN in environment variables"),{id:"no-queue-token",status:"error",error:"Queue token not configured"};const t=Array.isArray(e)?e:[e],a=`${s}?fn=enqueue`;try{const r=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-Queue-Token":o},body:JSON.stringify({jobs:t})});if(!r.ok){const i=await r.text().catch(()=>"");throw new Error(`enqueue failed ${r.status}: ${i||r.statusText}`)}return await r.json().catch(()=>({}))}catch(r){throw r.message.includes("<!DOCTYPE")?new Error("Server returned HTML instead of JSON. Check if the endpoint URL is correct."):r}}async function c(){if(typeof window>"u")return{connected:!0,status:"skipped",message:"Skipping connectivity check during build"};if(!s)return{connected:!1,status:"error",error:"Missing VITE_QUEUE_URL or VITE_ENQUEUE_ENDPOINT in environment variables"};if(!o)return{connected:!1,status:"error",error:"Missing VITE_QUEUE_TOKEN in environment variables"};try{const e=`${s}?fn=getHealth`,t=await fetch(e,{method:"GET",mode:"cors",headers:o?{"X-Queue-Token":o}:{}});return{ok:t.ok,status:t.status,statusText:t.statusText,lastChecked:new Date().toISOString()}}catch(e){return{ok:!1,status:0,statusText:e.message,lastChecked:new Date().toISOString()}}}export{c,E as e};
//# sourceMappingURL=enqueue.d1a4464b.js.map
