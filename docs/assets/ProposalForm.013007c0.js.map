{"version":3,"file":"ProposalForm.013007c0.js","sources":["../../src/pages/ProposalForm.jsx"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport { useNavigate, useParams, Link, useLocation } from 'react-router-dom';\nimport { ArrowLeft, Save, Trash2, AlertTriangle, X, Check } from 'lucide-react';\nimport { useProposalContext } from '../contexts/ProposalContext.jsx';\n\n// Confirmation Dialog Component\nconst ConfirmationDialog = ({ \n  isOpen, \n  onConfirm, \n  onCancel, \n  title, \n  message, \n  confirmText = 'Confirm', \n  cancelText = 'Cancel',\n  variant = 'default' \n}) => {\n  const dialogRef = useRef(null);\n  const confirmButtonRef = useRef(null);\n\n  // Close on Escape key\n  useEffect(() => {\n    const handleKeyDown = (e) => {\n      if (e.key === 'Escape') onCancel();\n      if (e.key === 'Enter' && e.ctrlKey) onConfirm();\n    };\n    \n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [onConfirm, onCancel]);\n  \n  // Focus trap and auto-focus\n  useEffect(() => {\n    if (isOpen && confirmButtonRef.current) {\n      confirmButtonRef.current.focus();\n    }\n  }, [isOpen]);\n\n  if (!isOpen) return null;\n\n  const variantClasses = {\n    default: 'bg-blue-600 hover:bg-blue-700',\n    danger: 'bg-red-600 hover:bg-red-700',\n    warning: 'bg-yellow-600 hover:bg-yellow-700'\n  };\n\n  return (\n    <div \n      className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\"\n      role=\"dialog\"\n      aria-modal=\"true\"\n      aria-labelledby=\"dialog-title\"\n    >\n      <div \n        ref={dialogRef}\n        className=\"bg-white rounded-lg shadow-xl max-w-md w-full p-6\"\n        onKeyDown={(e) => e.stopPropagation()}\n      >\n        <div className=\"flex items-start\">\n          <div className={`flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full ${\n            variant === 'danger' ? 'bg-red-100' : 'bg-blue-100'\n          }`}>\n            <AlertTriangle className={`h-6 w-6 ${variant === 'danger' ? 'text-red-600' : 'text-blue-600'}`} aria-hidden=\"true\" />\n          </div>\n          <div className=\"ml-4\">\n            <h3 id=\"dialog-title\" className=\"text-lg font-medium text-gray-900\">\n              {title}\n            </h3>\n            <div className=\"mt-2\">\n              <p className=\"text-sm text-gray-600\">{message}</p>\n            </div>\n          </div>\n        </div>\n        <div className=\"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense\">\n          <button\n            type=\"button\"\n            ref={confirmButtonRef}\n            onClick={onConfirm}\n            className={`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white ${variantClasses[variant] || variantClasses.default} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:col-start-2 sm:text-sm`}\n          >\n            {confirmText}\n          </button>\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:col-start-1 sm:text-sm\"\n          >\n            {cancelText}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nconst ProposalForm = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const { getProposal, addProposal, updateProposal, deleteProposal } = useProposalContext();\n  \n  const existingProposal = id ? getProposal(id) : undefined;\n  const isEditing = !!existingProposal;\n  \n  const [formData, setFormData] = useState({\n    title: existingProposal?.title || '',\n    agency: existingProposal?.agency || '',\n    dueDate: existingProposal?.dueDate \n      ? new Date(existingProposal.dueDate).toISOString().slice(0, 10)\n      : '',\n    status: existingProposal?.status || 'intake',\n    notes: existingProposal?.notes || '',\n    type: existingProposal?.type || 'federal'\n  });\n  \n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [showSaveConfirm, setShowSaveConfirm] = useState(false);\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\n  const [formIsDirty, setFormIsDirty] = useState(false);\n  const initialFormData = useRef(JSON.stringify(formData));\n  \n  // Track form changes\n  useEffect(() => {\n    const currentData = JSON.stringify(formData);\n    setFormIsDirty(initialFormData.current !== currentData);\n  }, [formData]);\n  \n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  \n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (!formData.title.trim()) {\n      newErrors.title = 'Title is required';\n    }\n    \n    if (!formData.agency.trim()) {\n      newErrors.agency = 'Agency is required';\n    }\n    \n    if (!formData.dueDate) {\n      newErrors.dueDate = 'Due date is required';\n    } else if (new Date(formData.dueDate) < new Date()) {\n      newErrors.dueDate = 'Due date cannot be in the past';\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n  \n  const handleSubmit = (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n    \n    // If form is not dirty, don't show confirmation\n    if (!formIsDirty) {\n      saveProposal();\n      return;\n    }\n    \n    // Show confirmation dialog for unsaved changes\n    setShowSaveConfirm(true);\n  };\n  \n  const saveProposal = async () => {\n    setIsSubmitting(true);\n    \n    try {\n      const proposalData = {\n        title: formData.title.trim(),\n        agency: formData.agency.trim(),\n        dueDate: new Date(`${formData.dueDate}T12:00:00`).toISOString(),\n        status: formData.status,\n        type: formData.type,\n        notes: formData.notes.trim(),\n      };\n      \n      let newId;\n      if (isEditing && id) {\n        await updateProposal(id, proposalData);\n        newId = id;\n      } else {\n        newId = await addProposal(proposalData);\n      }\n      \n      // Update initial form data to match saved data\n      initialFormData.current = JSON.stringify({\n        ...formData,\n        id: newId\n      });\n      \n      navigate(`/proposals/${newId}`, { \n        state: { \n          message: isEditing ? 'Proposal updated successfully!' : 'Proposal created successfully!',\n          variant: 'success'\n        } \n      });\n    } catch (error) {\n      console.error('Error saving proposal:', error);\n      setErrors({\n        form: 'Failed to save proposal. Please try again.'\n      });\n    } finally {\n      setIsSubmitting(false);\n      setShowSaveConfirm(false);\n    }\n  };\n  \n  const confirmDelete = () => {\n    if (!isEditing || !id) return;\n    setShowDeleteConfirm(true);\n  };\n  \n  const handleDelete = async () => {\n    try {\n      await deleteProposal(id);\n      navigate('/dashboard', { \n        state: { \n          message: 'Proposal deleted successfully!',\n          variant: 'success'\n        } \n      });\n    } catch (error) {\n      console.error('Error deleting proposal:', error);\n      setErrors({\n        form: 'Failed to delete proposal. Please try again.'\n      });\n    } finally {\n      setShowDeleteConfirm(false);\n    }\n  };\n  \n  return (\n    <div className=\"max-w-3xl mx-auto\">\n      <div className=\"mb-6\">\n        <Link \n          to={isEditing ? `/proposals/${id}` : '/dashboard'} \n          className=\"text-primary-600 hover:text-primary-800 flex items-center\"\n          state={{ fromForm: true }}\n        >\n          <ArrowLeft size={18} className=\"mr-1\" />\n          <span>Back to {isEditing ? 'Proposal Details' : 'Dashboard'}</span>\n        </Link>\n      </div>\n      \n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\n        <div className=\"px-6 py-4 border-b border-gray-200\">\n          <h2 className=\"text-2xl font-semibold text-gray-800\">\n            {isEditing ? 'Edit Proposal' : 'New Proposal'}\n          </h2>\n        </div>\n        \n        <form onSubmit={handleSubmit} className=\"p-6\" noValidate>\n          {errors.form && (\n            <div className=\"mb-4 p-4 bg-red-50 text-red-700 rounded-md\" role=\"alert\">\n              {errors.form}\n            </div>\n          )}\n          \n          <div className=\"grid grid-cols-1 gap-6 sm:grid-cols-2\">\n            <div className=\"sm:col-span-2\">\n              <label htmlFor=\"title\" className=\"block text-sm font-medium text-gray-700\">\n                Title <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                id=\"title\"\n                name=\"title\"\n                value={formData.title}\n                onChange={handleChange}\n                className={`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${\n                  errors.title ? 'border-red-300' : ''\n                }`}\n                aria-invalid={!!errors.title}\n                aria-describedby={errors.title ? 'title-error' : undefined}\n                required\n              />\n              {errors.title && (\n                <p className=\"mt-2 text-sm text-red-600\" id=\"title-error\" role=\"alert\">\n                  {errors.title}\n                </p>\n              )}\n            </div>\n            \n            <div>\n              <label htmlFor=\"agency\" className=\"block text-sm font-medium text-gray-700\">\n                Agency <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"text\"\n                id=\"agency\"\n                name=\"agency\"\n                value={formData.agency}\n                onChange={handleChange}\n                className={`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${\n                  errors.agency ? 'border-red-300' : ''\n                }`}\n                aria-invalid={!!errors.agency}\n                aria-describedby={errors.agency ? 'agency-error' : undefined}\n                required\n              />\n              {errors.agency && (\n                <p className=\"mt-2 text-sm text-red-600\" id=\"agency-error\" role=\"alert\">\n                  {errors.agency}\n                </p>\n              )}\n            </div>\n            \n            <div>\n              <label htmlFor=\"dueDate\" className=\"block text-sm font-medium text-gray-700\">\n                Due Date <span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                type=\"date\"\n                id=\"dueDate\"\n                name=\"dueDate\"\n                value={formData.dueDate}\n                onChange={handleChange}\n                min={new Date().toISOString().split('T')[0]}\n                className={`mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm ${\n                  errors.dueDate ? 'border-red-300' : ''\n                }`}\n                aria-invalid={!!errors.dueDate}\n                aria-describedby={errors.dueDate ? 'duedate-error' : undefined}\n                required\n              />\n              {errors.dueDate && (\n                <p className=\"mt-2 text-sm text-red-600\" id=\"duedate-error\" role=\"alert\">\n                  {errors.dueDate}\n                </p>\n              )}\n            </div>\n            \n            <div>\n              <label htmlFor=\"status\" className=\"block text-sm font-medium text-gray-700\">\n                Status\n              </label>\n              <select\n                id=\"status\"\n                name=\"status\"\n                value={formData.status}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                aria-label=\"Select proposal status\"\n              >\n                <option value=\"intake\">Intake</option>\n                <option value=\"in_progress\">In Progress</option>\n                <option value=\"submitted\">Submitted</option>\n                <option value=\"awarded\">Awarded</option>\n                <option value=\"not_awarded\">Not Awarded</option>\n              </select>\n            </div>\n            \n            <div>\n              <label htmlFor=\"type\" className=\"block text-sm font-medium text-gray-700\">\n                Type\n              </label>\n              <select\n                id=\"type\"\n                name=\"type\"\n                value={formData.type}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                aria-label=\"Select proposal type\"\n              >\n                <option value=\"federal\">Federal</option>\n                <option value=\"state\">State</option>\n                <option value=\"local\">Local</option>\n                <option value=\"commercial\">Commercial</option>\n              </select>\n            </div>\n            \n            <div className=\"sm:col-span-2\">\n              <label htmlFor=\"notes\" className=\"block text-sm font-medium text-gray-700\">\n                Notes\n              </label>\n              <textarea\n                id=\"notes\"\n                name=\"notes\"\n                rows={4}\n                value={formData.notes}\n                onChange={handleChange}\n                className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm\"\n                placeholder=\"Add any additional notes or details about this proposal...\"\n                aria-label=\"Proposal notes\"\n              />\n            </div>\n          </div>\n          \n          <div className=\"mt-8 flex flex-col sm:flex-row justify-between gap-4\">\n            <div>\n              {isEditing && (\n                <button\n                  type=\"button\"\n                  onClick={confirmDelete}\n                  className={`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${\n                    'bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500'\n                  }`}\n                  aria-label=\"Delete proposal\"\n                >\n                  <Trash2 size={16} className=\"mr-2\" />\n                  Delete Proposal\n                </button>\n              )}\n            </div>\n            <div className=\"flex flex-col sm:flex-row gap-3\">\n              <button\n                type=\"button\"\n                onClick={() => {\n                  if (formIsDirty) {\n                    if (window.confirm('You have unsaved changes. Are you sure you want to leave?')) {\n                      navigate(isEditing ? `/proposals/${id}` : '/dashboard');\n                    }\n                  } else {\n                    navigate(isEditing ? `/proposals/${id}` : '/dashboard');\n                  }\n                }}\n                className=\"inline-flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500\"\n              >\n                <X size={16} className=\"mr-2\" />\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={isSubmitting || !formIsDirty}\n                className={`inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white ${\n                  isSubmitting \n                    ? 'bg-primary-400' \n                    : 'bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500'\n                } ${!formIsDirty ? 'opacity-50 cursor-not-allowed' : ''}`}\n                aria-busy={isSubmitting}\n              >\n                {isSubmitting ? (\n                  <>\n                    <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                    {isEditing ? 'Updating...' : 'Creating...'}\n                  </>\n                ) : (\n                  <>\n                    <Save size={16} className=\"mr-2\" />\n                    {isEditing ? 'Update' : 'Create'} Proposal\n                  </>\n                )}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n      \n      {/* Save Confirmation Dialog */}\n      <ConfirmationDialog\n        isOpen={showSaveConfirm}\n        onConfirm={saveProposal}\n        onCancel={() => setShowSaveConfirm(false)}\n        title={isEditing ? 'Update Proposal' : 'Create New Proposal'}\n        message={`Are you sure you want to ${isEditing ? 'update' : 'create'} this proposal?`}\n        confirmText={isSubmitting ? 'Saving...' : 'Confirm'}\n        variant=\"default\"\n      />\n      \n      {/* Delete Confirmation Dialog */}\n      <ConfirmationDialog\n        isOpen={showDeleteConfirm}\n        onConfirm={handleDelete}\n        onCancel={() => setShowDeleteConfirm(false)}\n        title=\"Delete Proposal\"\n        message=\"Are you sure you want to delete this proposal? This action cannot be undone.\"\n        confirmText={isSubmitting ? 'Deleting...' : 'Delete'}\n        variant=\"danger\"\n      />\n      \n      {/* Unsaved Changes Prompt */}\n      {formIsDirty && (\n        <div className=\"fixed bottom-0 left-0 right-0 bg-yellow-50 border-t border-yellow-200 p-4 shadow-lg\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex-1 flex items-center\">\n                <div className=\"flex-shrink-0 pt-0.5\">\n                  <AlertTriangle className=\"h-5 w-5 text-yellow-400\" aria-hidden=\"true\" />\n                </div>\n                <p className=\"ml-3 text-sm text-yellow-700\">\n                  <span>You have unsaved changes.</span>\n                </p>\n              </div>\n              <div className=\"flex-shrink-0 sm:ml-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setFormData(JSON.parse(initialFormData.current));\n                    setFormIsDirty(false);\n                  }}\n                  className=\"mr-3 text-sm font-medium text-yellow-700 hover:text-yellow-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500\"\n                >\n                  Discard Changes\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleSubmit}\n                  className=\"px-3 py-1.5 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500\"\n                >\n                  Save Changes\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default ProposalForm;"],"names":["ConfirmationDialog","isOpen","onConfirm","onCancel","title","message","confirmText","cancelText","variant","dialogRef","useRef","confirmButtonRef","useEffect","handleKeyDown","e","variantClasses","jsx","jsxs","AlertTriangle","ProposalForm","id","useParams","navigate","useNavigate","getProposal","addProposal","updateProposal","deleteProposal","useProposalContext","existingProposal","isEditing","formData","setFormData","useState","errors","setErrors","isSubmitting","setIsSubmitting","showSaveConfirm","setShowSaveConfirm","showDeleteConfirm","setShowDeleteConfirm","formIsDirty","setFormIsDirty","initialFormData","currentData","handleChange","name","value","prev","validateForm","newErrors","handleSubmit","saveProposal","proposalData","newId","error","confirmDelete","handleDelete","Link","ArrowLeft","Trash2","X","Fragment","Save"],"mappings":"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"}