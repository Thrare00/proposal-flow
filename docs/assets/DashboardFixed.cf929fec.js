import{j as e,a as z}from"./main.b5b31452.js";import{r as n,R as A,L as d}from"./react-vendor.36470f4f.js";import{c as M}from"./enqueue.3af04aff.js";import{P as U}from"./ProposalCard.37143e78.js";import{i as v,g as N}from"./dateUtils.a866c5f2.js";import{P as O,e as y,f as R,g as $,h as E,i as w,j as I,U as _,k as G}from"./ui-lib.676c71c1.js";import"./statusUtils.42174679.js";import"./parseISO.585b4435.js";import"./format.ad2c0b21.js";import"./isValid.f1396d2d.js";import"./isSameDay.07bbb616.js";function Y(){const[r,c]=n.useState({ok:null,loading:!0,lastChecked:null,status:"",statusText:""}),o=async()=>{try{c(x=>({...x,loading:!0}));const t=await M();c({ok:t.ok,status:t.status,statusText:t.statusText,loading:!1,lastChecked:new Date})}catch(t){c({ok:!1,error:t.message,loading:!1,lastChecked:new Date})}};return n.useEffect(()=>{o();const t=setInterval(o,5*60*1e3);return()=>clearInterval(t)},[]),r.loading?e.jsx("div",{className:"text-sm px-4 py-2 bg-yellow-100 text-yellow-800",children:e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx("span",{className:"w-2 h-2 mr-2 bg-yellow-500 rounded-full"}),"Checking connection..."]})}):r.ok?e.jsx("div",{className:"text-sm px-4 py-2 bg-green-100 text-green-800 cursor-help",title:`Status: ${r.status} ${r.statusText}`,children:e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx("span",{className:"w-2 h-2 mr-2 bg-green-500 rounded-full"}),"Connected",r.lastChecked&&` - Last checked: ${r.lastChecked.toLocaleTimeString()}`]})}):e.jsx("div",{className:"text-sm px-4 py-2 bg-red-100 text-red-800 cursor-help",title:`${r.error||"Connection failed"} (${r.status})`,children:e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx("span",{className:"w-2 h-2 mr-2 bg-red-500 rounded-full"}),"Disconnected - Please check your internet connection"]})})}const B=["intake","outline","drafting","internal_review","final_review","submitted"],C=()=>{const{proposals:r,isLoading:c,error:o}=z(),[t,x]=n.useState(""),[a,u]=n.useState("all"),[l,p]=n.useState("all");if(c)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});if(o)return e.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:"Failed to load proposals. Please try again later."})})]})});const k=(r==null?void 0:r.length)||0,S=r.filter(s=>v(s.dueDate)&&s.status!=="submitted").length,F=r.filter(s=>{const m=N(s.dueDate);return(m==="critical"||m==="high")&&!v(s.dueDate)&&s.status!=="submitted"}).length,D=r.filter(s=>s.status==="submitted").length,g=n.useMemo(()=>{if(!r||!Array.isArray(r))return[];const s=t.toLowerCase(),m=t.trim()!=="",T=a!=="all",P=l!=="all";return r.filter(i=>{var h,f;if(m){const b=(h=i.title)==null?void 0:h.toLowerCase().includes(s),L=(f=i.agency)==null?void 0:f.toLowerCase().includes(s);if(!b&&!L)return!1}return!(T&&i.status!==a||P&&N(i.dueDate)!==l)}).sort((i,h)=>new Date(i.dueDate).getTime()-new Date(h.dueDate).getTime())},[r,t,a,l]),j=()=>{x(""),u("all"),p("all")};return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),e.jsx(Y,{})]}),e.jsx("p",{className:"text-gray-600",children:"Manage and track your government contract proposals"})]}),e.jsxs(d,{to:"/dashboard/proposals/new",className:"btn btn-primary flex items-center justify-center space-x-2 self-start",children:[e.jsx(O,{size:18}),e.jsx("span",{children:"New Proposal"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"card bg-primary-50 border border-primary-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-800 mr-4",children:e.jsx(y,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary-800 font-medium",children:"Total Proposals"}),e.jsx("p",{className:"text-2xl font-bold text-primary-900",children:k})]})]})}),e.jsx("div",{className:"card bg-error-50 border border-error-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-error-100 flex items-center justify-center text-error-800 mr-4",children:e.jsx(R,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-error-800 font-medium",children:"Overdue"}),e.jsx("p",{className:"text-2xl font-bold text-error-900",children:S})]})]})}),e.jsx("div",{className:"card bg-warning-50 border border-warning-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-warning-100 flex items-center justify-center text-warning-800 mr-4",children:e.jsx(y,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-warning-800 font-medium",children:"Due Soon"}),e.jsx("p",{className:"text-2xl font-bold text-warning-900",children:F})]})]})}),e.jsx("div",{className:"card bg-success-50 border border-success-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-success-100 flex items-center justify-center text-success-800 mr-4",children:e.jsx($,{size:24})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-success-800 font-medium",children:"Completed"}),e.jsx("p",{className:"text-2xl font-bold text-success-900",children:D})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-card p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("label",{htmlFor:"proposal-search",className:"sr-only",children:"Search proposals"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(E,{size:18,className:"text-gray-400","aria-hidden":"true"})}),e.jsx("input",{id:"proposal-search",name:"proposal-search",type:"text",value:t,onChange:s=>x(s.target.value),className:"form-input pl-10",placeholder:"Search proposals by title or agency..."})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"proposal-status-filter",className:"sr-only",children:"Filter by status"}),e.jsxs("select",{id:"proposal-status-filter",name:"proposal-status-filter",value:a,onChange:s=>u(s.target.value),className:"form-select","aria-label":"Filter by status",children:[e.jsx("option",{value:"all",children:"All Statuses"}),B.map(s=>e.jsx("option",{value:s,children:s.charAt(0).toUpperCase()+s.slice(1)},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"proposal-urgency-filter",className:"sr-only",children:"Filter by urgency"}),e.jsxs("select",{id:"proposal-urgency-filter",value:l,onChange:s=>p(s.target.value),className:"form-select","aria-label":"Filter by urgency",children:[e.jsx("option",{value:"all",children:"All Urgency Levels"}),e.jsx("option",{value:"critical",children:"Critical (Due in 2 days)"}),e.jsx("option",{value:"high",children:"High (Due in 1 week)"}),e.jsx("option",{value:"medium",children:"Medium (Due later)"}),e.jsx("option",{value:"low",children:"Low (Due later)"})]})]}),e.jsxs("button",{onClick:j,className:"btn btn-secondary flex items-center space-x-2","aria-label":"Clear all filters",disabled:a==="all"&&l==="all"&&!t,children:[e.jsx(w,{size:16}),e.jsx("span",{children:"Clear Filters"})]})]})]})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Access"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(d,{to:"/directories",className:"p-6 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow border border-gray-200 flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-full text-blue-600",children:e.jsx(I,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Directories"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Manage portal directories and statuses"})]})]}),e.jsxs(d,{to:"/ceo-actions",className:"p-6 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow border border-gray-200 flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-full text-purple-600",children:e.jsx(_,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"CEO Actions"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Create reminders and follow-ups"})]})]}),e.jsxs(d,{to:"/reports",className:"p-6 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow border border-gray-200 flex items-center space-x-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-full text-green-600",children:e.jsx(G,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Reports"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Generate and view reports"})]})]})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Proposals"}),g.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(s=>e.jsx(U,{proposal:s},s.id))}):e.jsx("div",{className:"bg-white rounded-lg shadow-card p-8 text-center",children:e.jsxs("div",{className:"text-gray-500 mb-4",children:[e.jsx(w,{size:64,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-xl font-medium text-gray-700 mb-2",children:"No proposals found"}),e.jsx("p",{className:"mb-6",children:t||a!=="all"||l!=="all"?"Try adjusting your search filters to find what you're looking for.":"You haven't created any proposals yet. Get started by creating your first proposal."}),t||a!=="all"||l!=="all"?e.jsx("button",{onClick:j,className:"btn btn-primary",children:"Clear Filters"}):e.jsx(d,{to:"/dashboard/proposals/new",className:"btn btn-primary",children:"Create Your First Proposal"})]})})]})]})};C.propTypes={};const re=A.memo(C);export{re as default};
//# sourceMappingURL=DashboardFixed.cf929fec.js.map
