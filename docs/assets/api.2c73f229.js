const h="https://proposal-flow.rareearthcontracting.workers.dev",c=h,l="https://proposal-flow.rareearthcontracting.workers.dev/",f="1BCghnwFPWT1_TZ5Z4nAO13KAIZ2NlDM1";typeof window<"u"&&!window.__PF_ENDPOINTS_LOGGED__&&(window.__PF_ENDPOINTS_LOGGED__=!0,console.log("[PF] Endpoints:",{GAS_PROXY:"https://proposal-flow.rareearthcontracting.workers.dev",GAS_RESOLVED:c,HEALTH_RESOLVED:l,QUEUE_URL:typeof import.meta<"u"&&{VITE_BASE_URL:"/proposal-flow/",VITE_QUEUE_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_URL:"https://script.google.com/macros/s/AKfycbyYhYWfVMNqIUlYgwlT8_Sv3ZPXze_EyBzdpjbGwk45Qemjw3GcHT7rSqI1i1zLjS4/exec",VITE_HEALTH_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_PROXY:"https://proposal-flow.rareearthcontracting.workers.dev",VITE_REPORTS_FOLDER_ID:"1BCghnwFPWT1_TZ5Z4nAO13KAIZ2NlDM1",BASE_URL:"/proposal-flow/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"https://proposal-flow.rareearthcontracting.workers.dev/"}));async function i(o,r){const t=await fetch(o,{...r,credentials:"omit",headers:{Accept:"application/json",...(r==null?void 0:r.headers)||{}}}),s=t.headers.get("content-type")||"";if(!t.ok){const e=await t.text().catch(()=>"");if(e.trim().startsWith("<!DOCTYPE")||e.trim().startsWith("<html"))throw new Error(`Upstream returned HTML (${t.status}). Snippet: ${e.slice(0,160)}`);try{if(e&&(s.includes("json")||e.trim().startsWith("{")||e.trim().startsWith("["))){const w=JSON.parse(e);throw new Error(`${t.status} ${t.statusText} — ${JSON.stringify(w).slice(0,200)}`)}}catch{}throw new Error(`${t.status} ${t.statusText} — ${e.slice(0,200)}`)}if(s.includes("json"))return await t.json();const n=(await t.text()).trim();if(n.startsWith("{")||n.startsWith("["))try{return JSON.parse(n)}catch{}throw new Error(`Failed to parse JSON response. Content-Type: ${s||"n/a"}. Snippet: ${n.slice(0,200)}`)}async function p(o,r=3,t=600){let s;for(let a=0;a<r;a++)try{return await o()}catch(n){s=n,a<r-1&&await new Promise(e=>setTimeout(e,t*(a+1)))}throw s}async function d(){return p(()=>i(`${l}?fn=getHealth`))}async function E(){return p(()=>i(`${c}?fn=getCadence`))}async function _(o){return p(()=>i(`${c}?fn=setCadence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}))}async function u(){return p(()=>i(`${c}?fn=getReports&folderId=${encodeURIComponent(f)}`))}export{u as a,E as b,d as g,_ as s};
//# sourceMappingURL=api.2c73f229.js.map
