import{a as p,j as e}from"./main.f7b3b261.js";import{r as g,L as f}from"./react-vendor.36470f4f.js";import{U as h}from"./UrgencyBadge.1b4da918.js";import{i as l,f as j}from"./dateUtils.a866c5f2.js";import{V as b,s as y,r as N,f as v,v as C,T as w}from"./ui-lib.676c71c1.js";const U=({task:s,showProposalLink:o,onEdit:c,onDelete:i})=>{const[r,t]=g.useState(!1),n=p(),{updateTaskStatus:m}=n,d=s.urgency||"low",x=()=>{const a=s.status.current==="completed"?"in_progress":"completed";m(s.id,{current:a,progress:a==="completed"?100:50,lastUpdated:new Date().toISOString()})},u=()=>{r?(i(),t(!1)):(t(!0),setTimeout(()=>{t(!1)},3e3))};return e.jsx("div",{className:`card border ${s.status.current==="completed"?"border-success-200 bg-success-50":l(s.dueDate)?"border-error-200 bg-error-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("button",{onClick:x,className:`flex-shrink-0 h-5 w-5 rounded border ${s.status.current==="completed"?"bg-success-500 border-success-500 text-white":"border-gray-300 bg-white"} flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 mr-3 mt-1`,"aria-label":s.status.current==="completed"?"Mark as incomplete":"Mark as complete",children:s.status.current==="completed"&&e.jsx(b,{size:14})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:`text-base font-medium ${s.status.current==="completed"?"line-through text-gray-500":"text-gray-900"}`,children:s.title}),o&&e.jsx(f,{to:`/proposals/${s.proposalId}`,className:"text-sm text-primary-600 hover:text-primary-800 block mt-1",children:s.title}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:s.owner})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{urgency:d}),e.jsx(N,{size:16,className:"text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[j(s.dueDate),l(s.dueDate)&&!s.completed&&e.jsx(v,{size:12,className:"inline ml-1 text-error-500"})]})]})]})]})]})}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:c,className:"p-1 text-gray-500 hover:text-primary-600 rounded-full hover:bg-gray-100",title:"Edit task",children:e.jsx(C,{size:16})}),e.jsx("button",{onClick:u,className:`p-1 rounded-full ${r?"text-white bg-error-500 hover:bg-error-600":"text-gray-500 hover:text-error-600 hover:bg-gray-100"}`,title:r?"Confirm delete":"Delete task",children:e.jsx(w,{size:16})})]})]})})};export{U as T};
//# sourceMappingURL=TaskCard.7179aa45.js.map
