import{j as e}from"./main.7e5e4b3c.js";import{r as c}from"./react-vendor.36470f4f.js";import y from"./SOWAnalyzer.77c19b03.js";import{c as f}from"./api.5bcaf439.js";import{e as d}from"./enqueue.d1a4464b.js";import"./ui-lib.5368d22a.js";const u={Profitability:80,StrategicFit:80,Competition:70,SubcontractingPotential:40,LikelihoodOfAward:55,RelationshipLeverage:45,PastPerformanceMatch:20};function N(a){const r=Object.keys(u),p=r.reduce((i,n)=>i+u[n],0),l=r.reduce((i,n)=>{var o;return i+(Number((o=a==null?void 0:a.metrics)==null?void 0:o[n])||0)*u[n]},0);return Math.round(l/p*100)/100}function g(){const[a,r]=c.useState([]),[p,l]=c.useState(!0),[i,n]=c.useState(null);c.useState("all"),c.useEffect(()=>{let t=!0;return(async()=>{try{l(!0),n(null);const s=await f();Array.isArray(s)?t&&r(s):Array.isArray(s==null?void 0:s.opportunities)?t&&r(s.opportunities):t&&r([])}catch(s){n(s.message||"Failed to load opportunities"),r([])}finally{l(!1)}})(),()=>{t=!1}},[]);const o=c.useMemo(()=>a.map(s=>({...s,__score:N(s)})).sort((s,j)=>j.__score-s.__score),[a]),m=async(t,s)=>{await d({action:"update_stage",payload:{opportunityId:t.id,stage:s}})},x=async t=>{await d({action:"log_pipeline_opportunity",payload:{opportunityId:t.id}})},h=async t=>{await d({action:"create_upload_drop",payload:{opportunityId:t.id}})},b=async()=>{await d({action:"run_opportunity_scan"})};return p?e.jsx("div",{className:"p-4",children:"Loading opportunities..."}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Opportunities"}),e.jsx("button",{onClick:b,className:"btn btn-primary",children:"Run Opportunity Scan"})]}),i&&e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 text-sm",children:i}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left border-b",children:[e.jsx("th",{className:"p-2",children:"Rank"}),e.jsx("th",{className:"p-2",children:"Title"}),e.jsx("th",{className:"p-2",children:"Agency"}),e.jsx("th",{className:"p-2",children:"Score"}),e.jsx("th",{className:"p-2",children:"Stage"}),e.jsx("th",{className:"p-2",children:"Actions"})]})}),e.jsx("tbody",{children:o.map((t,s)=>e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"p-2",children:s+1}),e.jsx("td",{className:"p-2",children:e.jsx("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline",children:t.title||t.name||"Untitled"})}),e.jsx("td",{className:"p-2",children:t.agency||"-"}),e.jsx("td",{className:"p-2 font-medium",children:t.__score}),e.jsx("td",{className:"p-2",children:t.stage||"opportunity"}),e.jsxs("td",{className:"p-2 space-x-2",children:[e.jsx("button",{onClick:()=>x(t),className:"btn btn-outline",children:"Log to Pipeline"}),e.jsx("button",{onClick:()=>h(t),className:"btn btn-outline",children:"Upload Docs"}),e.jsx("button",{onClick:()=>m(t,"market_research"),className:"btn btn-secondary",children:"Upgrade â†’ Research"})]})]},t.id||s))})]})})]})}function _(){return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Market Research"}),e.jsx(y,{})]})}function R(){const[a,r]=c.useState("opps");return e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Flow Board"}),e.jsx("div",{className:"border-b mb-4",children:e.jsxs("nav",{className:"-mb-px flex space-x-6","aria-label":"Tabs",children:[e.jsx("button",{className:`py-2 border-b-2 ${a==="opps"?"border-blue-600 text-blue-600":"border-transparent text-gray-500"}`,onClick:()=>r("opps"),children:"Opportunities"}),e.jsx("button",{className:`py-2 border-b-2 ${a==="research"?"border-blue-600 text-blue-600":"border-transparent text-gray-500"}`,onClick:()=>r("research"),children:"Market Research"})]})}),a==="opps"&&e.jsx(g,{}),a==="research"&&e.jsx(_,{})]})}export{R as default};
//# sourceMappingURL=FlowBoardTabs.d0f1c2e2.js.map
