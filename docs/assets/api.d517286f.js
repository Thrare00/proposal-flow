const h="https://proposal-flow.rareearthcontracting.workers.dev",p=h,f="https://script.google.com/macros/s/AKfycbyYhYWfVMNqIUlYgwlT8_Sv3ZPXze_EyBzdpjbGwk45Qemjw3GcHT7rSqI1i1zLjS4/exec",l="https://proposal-flow.rareearthcontracting.workers.dev/",d="1BCghnwFPWT1_TZ5Z4nAO13KAIZ2NlDM1";typeof window<"u"&&!window.__PF_ENDPOINTS_LOGGED__&&(window.__PF_ENDPOINTS_LOGGED__=!0,console.log("[PF] Endpoints:",{GAS_PROXY:"https://proposal-flow.rareearthcontracting.workers.dev",GAS_RESOLVED:p,HEALTH_RESOLVED:l,QUEUE_URL:typeof import.meta<"u"&&{VITE_BASE_URL:"/proposal-flow/",VITE_QUEUE_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_URL:"https://script.google.com/macros/s/AKfycbyYhYWfVMNqIUlYgwlT8_Sv3ZPXze_EyBzdpjbGwk45Qemjw3GcHT7rSqI1i1zLjS4/exec",VITE_HEALTH_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_PROXY:"https://proposal-flow.rareearthcontracting.workers.dev",VITE_REPORTS_FOLDER_ID:"1BCghnwFPWT1_TZ5Z4nAO13KAIZ2NlDM1",BASE_URL:"/proposal-flow/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"https://proposal-flow.rareearthcontracting.workers.dev/"}));async function c(r,s){const t=await fetch(r,{...s,credentials:"omit",headers:{Accept:"application/json",...(s==null?void 0:s.headers)||{}}}),o=t.headers.get("content-type")||"";if(!t.ok){const e=await t.text().catch(()=>"");if(e.trim().startsWith("<!DOCTYPE")||e.trim().startsWith("<html"))throw new Error(`Upstream returned HTML (${t.status}). Snippet: ${e.slice(0,160)}`);try{if(e&&(o.includes("json")||e.trim().startsWith("{")||e.trim().startsWith("["))){const w=JSON.parse(e);throw new Error(`${t.status} ${t.statusText} — ${JSON.stringify(w).slice(0,200)}`)}}catch{}throw new Error(`${t.status} ${t.statusText} — ${e.slice(0,200)}`)}if(o.includes("json"))return await t.json();const n=(await t.text()).trim();if(n.startsWith("{")||n.startsWith("["))try{return JSON.parse(n)}catch{}throw new Error(`Failed to parse JSON response. Content-Type: ${o||"n/a"}. Snippet: ${n.slice(0,200)}`)}async function i(r,s=3,t=600){let o;for(let a=0;a<s;a++)try{return await r()}catch(n){o=n,a<s-1&&await new Promise(e=>setTimeout(e,t*(a+1)))}throw o}async function _(){return i(()=>c(`${l}?fn=getHealth`))}async function E(){return i(()=>c(`${p}?fn=getCadence`))}async function S(r){return i(()=>c(`${p}?fn=setCadence`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}))}async function T(){const r=f;return i(()=>c(`${r}?fn=getReports&folderId=${encodeURIComponent(d)}`))}export{T as a,E as b,_ as g,S as s};
//# sourceMappingURL=api.d517286f.js.map
