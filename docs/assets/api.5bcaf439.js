const c="https://proposal-flow.rareearthcontracting.workers.dev",i="https://script.google.com/macros/s/AKfycbyYhYWfVMNqIUlYgwlT8_Sv3ZPXze_EyBzdpjbGwk45Qemjw3GcHT7rSqI1i1zLjS4/exec",d=c,w="https://proposal-flow.rareearthcontracting.workers.dev/",f="1BCghnwFPWT1_TZ5Z4nAO13KAIZ2NlDM1";typeof window<"u"&&!window.__PF_ENDPOINTS_LOGGED__&&(window.__PF_ENDPOINTS_LOGGED__=!0,console.log("[PF] Endpoints:",{GAS_PROXY:"https://proposal-flow.rareearthcontracting.workers.dev",GAS_URL:"https://script.google.com/macros/s/AKfycbyYhYWfVMNqIUlYgwlT8_Sv3ZPXze_EyBzdpjbGwk45Qemjw3GcHT7rSqI1i1zLjS4/exec",GAS_RESOLVED:d,HEALTH_RESOLVED:w,QUEUE_URL:typeof import.meta<"u"&&{VITE_BASE_URL:"/proposal-flow/",VITE_QUEUE_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_URL:"https://script.google.com/macros/s/AKfycbyYhYWfVMNqIUlYgwlT8_Sv3ZPXze_EyBzdpjbGwk45Qemjw3GcHT7rSqI1i1zLjS4/exec",VITE_HEALTH_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_PROXY:"https://proposal-flow.rareearthcontracting.workers.dev",VITE_REPORTS_FOLDER_ID:"1BCghnwFPWT1_TZ5Z4nAO13KAIZ2NlDM1",BASE_URL:"/proposal-flow/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"https://proposal-flow.rareearthcontracting.workers.dev/"}));async function u(e,t){const r=await fetch(e,{...t,credentials:"omit",headers:{Accept:"application/json",...(t==null?void 0:t.headers)||{}}}),o=r.headers.get("content-type")||"";if(!r.ok){const n=await r.text().catch(()=>"");if(n.trim().startsWith("<!DOCTYPE")||n.trim().startsWith("<html"))throw new Error(`Upstream returned HTML (${r.status}). Snippet: ${n.slice(0,160)}`);try{if(n&&(o.includes("json")||n.trim().startsWith("{")||n.trim().startsWith("["))){const h=JSON.parse(n);throw new Error(`${r.status} ${r.statusText} — ${JSON.stringify(h).slice(0,200)}`)}}catch{}throw new Error(`${r.status} ${r.statusText} — ${n.slice(0,200)}`)}if(o.includes("json"))return await r.json();const a=(await r.text()).trim();if(a.startsWith("{")||a.startsWith("["))try{return JSON.parse(a)}catch{}throw new Error(`Failed to parse JSON response. Content-Type: ${o||"n/a"}. Snippet: ${a.slice(0,200)}`)}async function p(e,t){let r;for(const o of e.filter(Boolean))try{return await u(o,t)}catch(s){r=s}throw r||new Error("No valid endpoints configured")}async function l(e,t=3,r=600){let o;for(let s=0;s<t;s++)try{return await e()}catch(a){o=a,s<t-1&&await new Promise(n=>setTimeout(n,r*(s+1)))}throw o}async function _(){const e=[`${w}?fn=getHealth`,`${i}?fn=getHealth`];return l(()=>p(e))}async function E(){const e=[`${c}?fn=getCadence`,`${i}?fn=getCadence`];return l(()=>p(e))}async function g(e){const t=[`${c}?fn=setCadence`,`${i}?fn=setCadence`];return l(()=>p(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))}async function y(){const e=[`${i}?fn=getReports&folderId=${encodeURIComponent(f)}`,`${c}?fn=getReports&folderId=${encodeURIComponent(f)}`];return l(()=>p(e))}async function S(){const e=[`${c}?fn=getOpportunities`,`${i}?fn=getOpportunities`],t=await l(()=>p(e));return Array.isArray(t)?t:Array.isArray(t==null?void 0:t.opportunities)?t.opportunities:[]}export{E as a,y as b,S as c,_ as g,g as s};
//# sourceMappingURL=api.5bcaf439.js.map
