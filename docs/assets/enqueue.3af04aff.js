function n(e,o=""){return typeof import.meta<"u"&&{VITE_BASE_URL:"/proposal-flow/",VITE_QUEUE_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_URL:"https://script.google.com/macros/s/AKfycbyYhYWfVMNqIUlYgwlT8_Sv3ZPXze_EyBzdpjbGwk45Qemjw3GcHT7rSqI1i1zLjS4/exec",VITE_HEALTH_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_PROXY:"https://proposal-flow.rareearthcontracting.workers.dev",VITE_REPORTS_FOLDER_ID:"1BCghnwFPWT1_TZ5Z4nAO13KAIZ2NlDM1",BASE_URL:"/proposal-flow/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&{VITE_BASE_URL:"/proposal-flow/",VITE_QUEUE_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_URL:"https://script.google.com/macros/s/AKfycbyYhYWfVMNqIUlYgwlT8_Sv3ZPXze_EyBzdpjbGwk45Qemjw3GcHT7rSqI1i1zLjS4/exec",VITE_HEALTH_URL:"https://proposal-flow.rareearthcontracting.workers.dev/",VITE_GAS_PROXY:"https://proposal-flow.rareearthcontracting.workers.dev",VITE_REPORTS_FOLDER_ID:"1BCghnwFPWT1_TZ5Z4nAO13KAIZ2NlDM1",BASE_URL:"/proposal-flow/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}[e]||o}const s=n("VITE_QUEUE_URL")||n("VITE_GAS_PROXY")||n("VITE_ENQUEUE_ENDPOINT"),r=n("VITE_QUEUE_TOKEN");async function E(e){if(typeof window>"u")return{id:"build-skip",status:"skipped"};if(!s)return console.warn("Missing VITE_QUEUE_URL or VITE_ENQUEUE_ENDPOINT in environment variables"),{id:"no-queue-url",status:"error",error:"Queue URL not configured"};if(!r)return console.warn("Missing VITE_QUEUE_TOKEN in environment variables"),{id:"no-queue-token",status:"error",error:"Queue token not configured"};const o=Array.isArray(e)?e:[e],a=`${s}?fn=enqueue`;try{const t=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-Queue-Token":r},body:JSON.stringify({jobs:o})});if(!t.ok){const i=await t.text().catch(()=>"");throw new Error(`enqueue failed ${t.status}: ${i||t.statusText}`)}return await t.json().catch(()=>({}))}catch(t){throw t.message.includes("<!DOCTYPE")?new Error("Server returned HTML instead of JSON. Check if the endpoint URL is correct."):t}}async function c(){if(typeof window>"u")return{connected:!0,status:"skipped",message:"Skipping connectivity check during build"};if(!s)return{connected:!1,status:"error",error:"Missing VITE_QUEUE_URL or VITE_ENQUEUE_ENDPOINT in environment variables"};if(!r)return{connected:!1,status:"error",error:"Missing VITE_QUEUE_TOKEN in environment variables"};try{const e=await fetch(s,{method:"HEAD",headers:r?{"X-Queue-Token":r}:{}});return{ok:e.ok,status:e.status,statusText:e.statusText,lastChecked:new Date().toISOString()}}catch(e){return{ok:!1,status:0,statusText:e.message,lastChecked:new Date().toISOString()}}}export{c,E as e};
//# sourceMappingURL=enqueue.3af04aff.js.map
